const nock = require('nock');

nock('https://api.sandbox.braintreegateway.com:443', {"encodedQueryParams":true})
  .persist()
  .post('/merchants/37f6rs93g6pcqt9y/transactions', {"transaction":{"amount":1,"credit_card":{"cardholder_name":"Joe Shopper","cvv":"874","expiration_month":"9","expiration_year":"2021","number":"4111111111111111"},"merchant_account_id":"usd","options":{"submit_for_settlement":true},"type":"sale"}})
  .reply(201, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<transaction>\n  <id>q0ah5m05</id>\n  <status>submitted_for_settlement</status>\n  <type>sale</type>\n  <currency-iso-code>USD</currency-iso-code>\n  <amount>1.00</amount>\n  <merchant-account-id>usd</merchant-account-id>\n  <sub-merchant-account-id nil=\"true\"/>\n  <master-merchant-account-id nil=\"true\"/>\n  <order-id nil=\"true\"/>\n  <created-at type=\"datetime\">2016-08-05T18:36:55Z</created-at>\n  <updated-at type=\"datetime\">2016-08-05T18:36:55Z</updated-at>\n  <customer>\n    <id nil=\"true\"/>\n    <first-name nil=\"true\"/>\n    <last-name nil=\"true\"/>\n    <company nil=\"true\"/>\n    <email nil=\"true\"/>\n    <website nil=\"true\"/>\n    <phone nil=\"true\"/>\n    <fax nil=\"true\"/>\n  </customer>\n  <billing>\n    <id nil=\"true\"/>\n    <first-name nil=\"true\"/>\n    <last-name nil=\"true\"/>\n    <company nil=\"true\"/>\n    <street-address nil=\"true\"/>\n    <extended-address nil=\"true\"/>\n    <locality nil=\"true\"/>\n    <region nil=\"true\"/>\n    <postal-code nil=\"true\"/>\n    <country-name nil=\"true\"/>\n    <country-code-alpha2 nil=\"true\"/>\n    <country-code-alpha3 nil=\"true\"/>\n    <country-code-numeric nil=\"true\"/>\n  </billing>\n  <refund-id nil=\"true\"/>\n  <refund-ids type=\"array\"/>\n  <refunded-transaction-id nil=\"true\"/>\n  <partial-settlement-transaction-ids type=\"array\"/>\n  <authorized-transaction-id nil=\"true\"/>\n  <settlement-batch-id nil=\"true\"/>\n  <shipping>\n    <id nil=\"true\"/>\n    <first-name nil=\"true\"/>\n    <last-name nil=\"true\"/>\n    <company nil=\"true\"/>\n    <street-address nil=\"true\"/>\n    <extended-address nil=\"true\"/>\n    <locality nil=\"true\"/>\n    <region nil=\"true\"/>\n    <postal-code nil=\"true\"/>\n    <country-name nil=\"true\"/>\n    <country-code-alpha2 nil=\"true\"/>\n    <country-code-alpha3 nil=\"true\"/>\n    <country-code-numeric nil=\"true\"/>\n  </shipping>\n  <custom-fields/>\n  <avs-error-response-code nil=\"true\"/>\n  <avs-postal-code-response-code>I</avs-postal-code-response-code>\n  <avs-street-address-response-code>I</avs-street-address-response-code>\n  <cvv-response-code>M</cvv-response-code>\n  <gateway-rejection-reason nil=\"true\"/>\n  <processor-authorization-code>FCLMYN</processor-authorization-code>\n  <processor-response-code>1000</processor-response-code>\n  <processor-response-text>Approved</processor-response-text>\n  <additional-processor-response nil=\"true\"/>\n  <voice-referral-number nil=\"true\"/>\n  <purchase-order-number nil=\"true\"/>\n  <tax-amount nil=\"true\"/>\n  <tax-exempt type=\"boolean\">false</tax-exempt>\n  <credit-card>\n    <token nil=\"true\"/>\n    <bin>411111</bin>\n    <last-4>1111</last-4>\n    <card-type>Visa</card-type>\n    <expiration-month>09</expiration-month>\n    <expiration-year>2021</expiration-year>\n    <customer-location>US</customer-location>\n    <cardholder-name>Joe Shopper</cardholder-name>\n    <image-url>https://assets.braintreegateway.com/payment_method_logo/visa.png?environment=sandbox</image-url>\n    <prepaid>Unknown</prepaid>\n    <healthcare>Unknown</healthcare>\n    <debit>Unknown</debit>\n    <durbin-regulated>Unknown</durbin-regulated>\n    <commercial>Unknown</commercial>\n    <payroll>Unknown</payroll>\n    <issuing-bank>Unknown</issuing-bank>\n    <country-of-issuance>Unknown</country-of-issuance>\n    <product-id>Unknown</product-id>\n    <unique-number-identifier nil=\"true\"/>\n    <venmo-sdk type=\"boolean\">false</venmo-sdk>\n  </credit-card>\n  <status-history type=\"array\">\n    <status-event>\n      <timestamp type=\"datetime\">2016-08-05T18:36:55Z</timestamp>\n      <status>authorized</status>\n      <amount>1.00</amount>\n      <user>makemek101@hotmail.com</user>\n      <transaction-source>api</transaction-source>\n    </status-event>\n    <status-event>\n      <timestamp type=\"datetime\">2016-08-05T18:36:55Z</timestamp>\n      <status>submitted_for_settlement</status>\n      <amount>1.00</amount>\n      <user>makemek101@hotmail.com</user>\n      <transaction-source>api</transaction-source>\n    </status-event>\n  </status-history>\n  <plan-id nil=\"true\"/>\n  <subscription-id nil=\"true\"/>\n  <subscription>\n    <billing-period-end-date nil=\"true\"/>\n    <billing-period-start-date nil=\"true\"/>\n  </subscription>\n  <add-ons type=\"array\"/>\n  <discounts type=\"array\"/>\n  <descriptor>\n    <name nil=\"true\"/>\n    <phone nil=\"true\"/>\n    <url nil=\"true\"/>\n  </descriptor>\n  <recurring type=\"boolean\">false</recurring>\n  <channel nil=\"true\"/>\n  <service-fee-amount nil=\"true\"/>\n  <escrow-status nil=\"true\"/>\n  <disbursement-details>\n    <disbursement-date nil=\"true\"/>\n    <settlement-amount nil=\"true\"/>\n    <settlement-currency-iso-code nil=\"true\"/>\n    <settlement-currency-exchange-rate nil=\"true\"/>\n    <funds-held nil=\"true\"/>\n    <success nil=\"true\"/>\n  </disbursement-details>\n  <disputes type=\"array\"/>\n  <payment-instrument-type>credit_card</payment-instrument-type>\n  <processor-settlement-response-code></processor-settlement-response-code>\n  <processor-settlement-response-text></processor-settlement-response-text>\n  <three-d-secure-info nil=\"true\"/>\n</transaction>\n", { date: 'Fri, 05 Aug 2016 18:36:55 GMT',
  'content-type': 'application/xml; charset=utf-8',
  'content-length': '4960',
  connection: 'close',
  'x-frame-options': 'SAMEORIGIN, SAMEORIGIN',
  'x-xss-protection': '1; mode=block',
  'x-content-type-options': 'nosniff',
  'x-authentication': 'basic_auth',
  'x-user': '5tyk3mpsjdzk2rrp',
  vary: 'Accept-Encoding',
  etag: 'W/"126c82d152e2c40807e6ee2c52248f6d"',
  'cache-control': 'max-age=0, private, must-revalidate',
  'x-request-id': 'cd1a35ce-fc1f-44a1-8edb-7e292e9e1201',
  'x-runtime': '0.369841',
  'strict-transport-security': 'max-age=31536000; includeSubDomains' });

nock('https://api.sandbox.braintreegateway.com:443', {"encodedQueryParams":true})
  .post('/merchants/37f6rs93g6pcqt9y/transactions', {"transaction":{"amount":1,"credit_card":{"cardholder_name":"Joe Shopper","cvv":"874","expiration_month":"9","expiration_year":"2021","number":"0123456789"},"merchant_account_id":"usd","options":{"submit_for_settlement":true},"type":"sale"}})
  .reply(422, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<api-error-response>\n  <errors>\n    <errors type=\"array\"/>\n    <transaction>\n      <errors type=\"array\">\n        <error>\n          <code>91577</code>\n          <attribute type=\"symbol\">merchant_account_id</attribute>\n          <message>Merchant account does not support payment instrument.</message>\n        </error>\n      </errors>\n      <credit-card>\n        <errors type=\"array\">\n          <error>\n            <code>81703</code>\n            <attribute type=\"symbol\">number</attribute>\n            <message>Credit card type is not accepted by this merchant account.</message>\n          </error>\n          <error>\n            <code>81716</code>\n            <attribute type=\"symbol\">number</attribute>\n            <message>Credit card number must be 12-19 digits.</message>\n          </error>\n        </errors>\n      </credit-card>\n    </transaction>\n  </errors>\n  <params>\n    <transaction>\n      <amount>1</amount>\n      <credit-card>\n        <cardholder-name>Joe Shopper</cardholder-name>\n        <expiration-month>9</expiration-month>\n        <expiration-year>2021</expiration-year>\n      </credit-card>\n      <merchant-account-id>usd</merchant-account-id>\n      <options>\n        <submit-for-settlement>true</submit-for-settlement>\n      </options>\n      <type>sale</type>\n    </transaction>\n  </params>\n  <message>Merchant account does not support payment instrument.\nCredit card type is not accepted by this merchant account.\nCredit card number must be 12-19 digits.</message>\n</api-error-response>\n", { date: 'Fri, 05 Aug 2016 18:36:56 GMT',
  'content-type': 'application/xml; charset=utf-8',
  'content-length': '1545',
  connection: 'close',
  'x-frame-options': 'SAMEORIGIN, SAMEORIGIN',
  'x-xss-protection': '1; mode=block',
  'x-content-type-options': 'nosniff',
  'x-authentication': 'basic_auth',
  'x-user': '5tyk3mpsjdzk2rrp',
  vary: 'Accept-Encoding',
  'cache-control': 'no-cache',
  'x-request-id': '6f8931ec-bf40-408c-afc0-f9e2cb001c25',
  'x-runtime': '0.131549',
  'strict-transport-security': 'max-age=31536000; includeSubDomains' });

nock('https://api.sandbox.braintreegateway.com:443', {"encodedQueryParams":true})
  .post('/merchants/37f6rs93g6pcqt9y/transactions', {"transaction":{"amount":0,"credit_card":{"cardholder_name":"Joe Shopper","cvv":"874","expiration_month":"9","expiration_year":"2021","number":"4111111111111111"},"merchant_account_id":"usd","options":{"submit_for_settlement":true},"type":"sale"}})
  .reply(422, "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<api-error-response>\n  <errors>\n    <errors type=\"array\"/>\n    <transaction>\n      <errors type=\"array\">\n        <error>\n          <code>81531</code>\n          <attribute type=\"symbol\">amount</attribute>\n          <message>Amount must be greater than zero.</message>\n        </error>\n      </errors>\n      <credit-card>\n        <errors type=\"array\"/>\n      </credit-card>\n    </transaction>\n  </errors>\n  <params>\n    <transaction>\n      <amount>0</amount>\n      <credit-card>\n        <cardholder-name>Joe Shopper</cardholder-name>\n        <expiration-month>9</expiration-month>\n        <expiration-year>2021</expiration-year>\n      </credit-card>\n      <merchant-account-id>usd</merchant-account-id>\n      <options>\n        <submit-for-settlement>true</submit-for-settlement>\n      </options>\n      <type>sale</type>\n    </transaction>\n  </params>\n  <message>Amount must be greater than zero.</message>\n</api-error-response>\n", { date: 'Fri, 05 Aug 2016 18:36:57 GMT',
  'content-type': 'application/xml; charset=utf-8',
  'content-length': '965',
  connection: 'close',
  'x-frame-options': 'SAMEORIGIN, SAMEORIGIN',
  'x-xss-protection': '1; mode=block',
  'x-content-type-options': 'nosniff',
  'x-authentication': 'basic_auth',
  'x-user': '5tyk3mpsjdzk2rrp',
  vary: 'Accept-Encoding',
  'cache-control': 'no-cache',
  'x-request-id': '8bc0ea04-17cc-4289-a08f-c54ba213f530',
  'x-runtime': '0.074488',
  'strict-transport-security': 'max-age=31536000; includeSubDomains' });
